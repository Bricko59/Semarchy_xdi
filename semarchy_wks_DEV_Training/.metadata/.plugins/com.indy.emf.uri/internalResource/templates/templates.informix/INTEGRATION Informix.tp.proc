<?xml version="1.0" encoding="UTF-8"?>
<proc:process xmlns:UUID="java.util.UUID" xmlns:common="http://exslt.org/common" xmlns:mdj="java:com.indy.xsl.global.Functions" xmlns:proc="http://www.example.org/proc" xmlns:saxon="http://saxon.sf.net/" id="_xDQOAW_jEeCn5oAD2BvLqg" description="This template is used for data integration on an Informix target table.&#xD;&#xA;&#xD;&#xA;Refer to the description of each Parameter for more information.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;History:&#xD;&#xA;16/06/2020&#x9;Bug fix: the 'Cdc Subscriber' parameter is ignored when querying the source data&#xD;&#xA;16/06/2020&#x9;New Parameters 'Unlock Cdc Table' and 'Lock Cdc Table'&#xD;&#xA;16/06/2020&#x9;New Parameter 'Cdc Subscriber'&#xD;&#xA;16/06/2020&#x9;Bug fix: the 'Cdc Subscriber' parameter is ignored on Lock/Unlock CDC steps&#xD;&#xA;07/02/2019&#x9;Fix 'Recycle Previous Rejects' step which should use DISTINCT keyword to remove dupplicates&#xD;&#xA;07/02/2019&#x9;Fix 'Recycle Previous Rejects' step which was missing quotes around a value and which had a synax issue for table aliases&#xD;&#xA;14/12/2018&#x9;Use fully qualified table name in the step performing updates&#xD;&#xA;13/12/2018&#x9;'Truncate Target Table','Delete Target Table', and 'Synchronize deletion from CDC' steps were not taking into account the 'Transactional Mode On Target' parameter&#xD;&#xA;11/10/2018&#x9;Make sure that the actions which optionally drop and create the target table are executed with the correct current database, which should be set before executing the drop and create queries&#xD;&#xA;09/10/2018&#x9;Fix update query which is incorrect when there are both columns with &quot;target&quot; execution location and &quot;source&quot; execution location at the same time&#xD;&#xA;09/10/2018&#x9;Reorganize the parameters display order&#xD;&#xA;09/10/2018&#x9;Some queries were not using the fully qualified table names&#xD;&#xA;09/10/2018&#x9;Change the current database to the one of the work schema when creating temporary work objects&#xD;&#xA;09/10/2018  Initialize template history" isBeginAction="true" name="INTEGRATION Informix" nbCycles="-1" toleratedError="false">
  <parameter id="_xDQOB2_jEeCn5oAD2BvLqg" description="If true, all source rows are directly inserted in the target table. No update is performed in this mode." name="appendMode" type="Boolean" value="false"/>
  <parameter id="_xDQODG_jEeCn5oAD2BvLqg" description="If true, the temporary objects created during integration are removed at the end of the process." name="cleanTemporaryObjects " type="Boolean" value="true"/>
  <parameter id="_xDQOAm_jEeCn5oAD2BvLqg" description="If true, new rows are inserted in the target table." name="doInsert" type="Boolean" value="true"/>
  <parameter id="_xDQOCW_jEeCn5oAD2BvLqg" description="If true, target table is truncated prior to the Integration." name="truncateTargetTable" type="Boolean" value="false"/>
  <parameter id="_xDQOA2_jEeCn5oAD2BvLqg" description="If true, existing rows of the target table will be updated with new values." name="doUpdate" type="Boolean" value="true"/>
  <parameter id="_xDQOCm_jEeCn5oAD2BvLqg" description="If true, all the target table rows are deleted before the integration with a DELETE statement." name="deleteAllTargetTable" type="Boolean" value="false"/>
  <parameter id="_xDQOCG_jEeCn5oAD2BvLqg" description="If true, a DISTINCT statement will be added on the query inserting data in the integration table.&#xD;&#xA;This is used to avoid having duplicates in the target table." name="useDistinct" type="Boolean" value="false"/>
  <parameter id="_xDQODW_jEeCn5oAD2BvLqg" description="If true, the rejects detected during the previous execution of the Mapping are added to the integration table." name="recycleRejects" type="Boolean" value="false"/>
  <parameter id="_xDQOBW_jEeCn5oAD2BvLqg" description="If true, the operations on the target table will be executed in a dedicated transaction.&#xD;&#xA;If false, each statement on the target table uses an Autocommit transaction." name="transactionalModeOnTarget" type="Boolean" value="true"/>
  <parameter id="_xDQODm_jEeCn5oAD2BvLqg" description="When set to true and one source is a CDC table, the records deleted from this source table are deleted from the target table." name="synchronizeDeletionsFromCDC" type="Boolean" value="false"/>
  <parameter id="_xDQOBG_jEeCn5oAD2BvLqg" description="If true, the transactions are committed at the end of the integration." name="commitTransaction" type="Boolean" value="true"/>
  <parameter id="_xDQOD2_jEeCn5oAD2BvLqg" description="If true, an index is created on the update key of the temporary integration table in order to optimize the subsequent statements using this table." name="createIndexOnPreIntegrationTable" type="Boolean" value="true"/>
  <parameter id="_xDQOC2_jEeCn5oAD2BvLqg" description="This option is used to choose whether to create or not the target table before the integration.&#xD;&#xA;&#xD;&#xA;- disable: The target table is not created.&#xD;&#xA;- create: The target table is created. If it already exists no error is raised.&#xD;&#xA;- drop and create: The target table will be dropped, and re-created on each execution." metaInf="&lt;metaInf id=&quot;value&quot;  value=&quot;true&quot;/>&#xD;&#xA;&lt;metaInf id=&quot;value&quot;  value=&quot;false&quot;/>&#xD;&#xA;&lt;metaInf id=&quot;value&quot;  value=&quot;drop and create&quot;/>" name="createTargetTable" type="String" value="false"/>
  <parameter id="_xDQOBm_jEeCn5oAD2BvLqg" description="Name of the transaction which will be used by the SQL actions." name="transactionName" type="String" value="T1"/>
  <parameter id="_cHv3ELCrEeqAJL64qj9Gxw" description="When a source table is used as CDC a lock is performed on it. It makes the changed data available in the Mapping.&#xD;&#xA;If set to false, the Lock must have been performed as part of a previous Mapping." name="lockCdcTable" type="Boolean" value="true"/>
  <parameter id="_cIJfsLCrEeqAJL64qj9Gxw" description="When a source table is used as CDC an unlock is performed on it after processing. It marks the changed data as consumed.&#xD;&#xA;If set to false, the Unlock must be performed as part of an upcoming Mapping." name="unlockCdcTable" type="Boolean" value="true"/>
  <parameter id="_cIKGwLCrEeqAJL64qj9Gxw" description="CDC Subscriber to use when CDC has been enabled on a source table." name="cdcSubscriber" type="String"/>
  <subProcess id="_xDQOEG_jEeCn5oAD2BvLqg" name="PREPARE_INTEGRATION">
    <link id="_xDQOEW_jEeCn5oAD2BvLqg" executionType="OK" generationType="OK" mandatory="1" targetId="_xDQOXG_jEeCn5oAD2BvLqg?fileId=_xDQOAW_jEeCn5oAD2BvLqg$type=proc$name=INTEGRATION?"/>
    <parameter id="_xDQOEm_jEeCn5oAD2BvLqg" name="TPL_STEP" type="String" value="Integration.BeforeControl"/>
    <actionCode id="_xDQOE2_jEeCn5oAD2BvLqg" generationCondition="'${createTargetTable}$'='true' or '${createTargetTable}$' = 'drop and create'" isBeginAction="false" name="Creation of target table " nbCycles="-1" toleratedError="true" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_xDQOFG_jEeCn5oAD2BvLqg" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_xDQOIm_jEeCn5oAD2BvLqg"/>
      <parameter id="_xDQOFW_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_xDQOFm_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_xDQOF2_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="AUTOCOMMIT"/>
      <parameter id="_xmq5wM0kEeig2LA7wtLdqA" name="SQL_MULTI_QUERYS" type="Boolean" value="true"/>
      <code>DATABASE %x{$REF/ref:target()/ref:schema()/tech:catalogName()}x%;
Create table %x{md:physicalPath($REF/ref:target())}x%
(
	%x{md:patternList($REF/ref:target()/ref:columns(),'[columnName] [targetCreationType] [null]',',\n\t')}x%
);</code>
    </actionCode>
    <actionCode id="_xDQOGG_jEeCn5oAD2BvLqg" generationCondition="" isBeginAction="false" name="Drop of pre-integration table" nbCycles="-1" toleratedError="true" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_xDQOGW_jEeCn5oAD2BvLqg" executionType="OK" generationType="OK" mandatory="1" targetId="_xDQOHW_jEeCn5oAD2BvLqg"/>
      <parameter id="_xDQOGm_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_xDQOG2_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_xDQOHG_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="AUTOCOMMIT"/>
      <parameter id="_DS_AcMvmEeiPY-9-vFlpTA" name="SQL_MULTI_QUERYS" type="Boolean" value="true"/>
      <code>DATABASE %x{$REF/ref:target()/ref:schema()/ref:work()/tech:catalogName()}x%;&#xD;
drop table %x{md:physicalPath($REF,'workName')}x%;&#xD;
DATABASE %x{$REF/ref:target()/ref:schema()/tech:catalogName()}x%;&#xD;
</code>
    </actionCode>
    <actionCode id="_xDQOHW_jEeCn5oAD2BvLqg" generationCondition="" isBeginAction="false" name="Creation of pre- integration table" nbCycles="-1" toleratedError="false" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_w9ubEMsOEeiFeYGGwExyhg" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_xDQOM2_jEeCn5oAD2BvLqg"/>
      <parameter id="_xDQOH2_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_xDQOIG_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_xDQOIW_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="AUTOCOMMIT"/>
      <parameter id="_C-0uUMvmEeiPY-9-vFlpTA" name="SQL_MULTI_QUERYS" type="Boolean" value="true"/>
      <code>DATABASE %x{$REF/ref:target()/ref:schema()/ref:work()/tech:catalogName()}x%;
Create table %x{md:physicalPath($REF,'workName')}x%
(
	%x{md:patternList($REF/ref:columns(),'[name] [targetWritableType] [nullWord]',',\n\t')}x%,
	INCREMENTAL_FLAG	CHAR(1)
)
%x{md:getParamValue($this,'integrationTableCreationOptions')}x%;
DATABASE %x{$REF/ref:target()/ref:schema()/tech:catalogName()}x%;

</code>
    </actionCode>
    <actionCode id="_xDQOIm_jEeCn5oAD2BvLqg" generationCondition="'${truncateTargetTable}$'='true'" isBeginAction="false" name="Truncation of target table" nbCycles="-1" toleratedError="false" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_xDQOI2_jEeCn5oAD2BvLqg" generationCondition="'${transactionalModeOnTarget}$'='false'" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_xDQOKG_jEeCn5oAD2BvLqg"/>
      <link id="_xDQOJG_jEeCn5oAD2BvLqg" generationCondition="'${transactionalModeOnTarget}$'='true'" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_xDQOSW_jEeCn5oAD2BvLqg"/>
      <parameter id="_xDQOJW_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_xDQOJm_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_P56wwP70EeiYo6ti8tYZ3g" name="SQL_TRANSACTION_TYPE" type="String" value="%x{if (md:paramValue($this,'transactionalModeOnTarget')='true') then 'NOCOMMIT' else 'AUTOCOMMIT' }x%"/>
      <parameter id="_Qe1bsP70EeiYo6ti8tYZ3g" name="SQL_TRANSACTION_NAME" type="String" value="%x{if (md:paramValue($this,'transactionalModeOnTarget')='true') then md:paramValue($this,'transactionName') else '' }x%"/>
      <code>Truncate table %x{md:physicalPath($REF/ref:target())}x%</code>
    </actionCode>
    <actionCode id="_xDQOKG_jEeCn5oAD2BvLqg" generationCondition="'${deleteAllTargetTable}$'='true'" isBeginAction="false" name="Deletion of target table" nbCycles="-1" toleratedError="false" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_xDQOKW_jEeCn5oAD2BvLqg" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_xDQOLm_jEeCn5oAD2BvLqg"/>
      <parameter id="_xDQOKm_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_xDQOK2_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_xDQOLG_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="AUTOCOMMIT"/>
      <parameter id="_xDQOLW_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE_STAT" type="String" value="DELETE"/>
      <code>delete from %x{md:physicalPath($REF/ref:target())}x%</code>
    </actionCode>
    <actionCode id="_xDQOLm_jEeCn5oAD2BvLqg" generationCondition="not(md:paramValue($this, 'lockCdcTable')='false')" isBeginAction="false" name="Lock of CDC table" nbCycles="-1" repetitionMode="Sequential" repetitionQuery="$REF/ref:from()[tech:isCDC() and not(tech:isLoaded())]" repetitionVariableName="CDC" toleratedError="false" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_xDQOL2_jEeCn5oAD2BvLqg" description="" generationCondition="'${appendMode}$'='false' or ('${appendMode}$'='true' and ($REF/tech:hasIntegrationReject() or $REF/tech:hasCdc()))" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_xDQOGG_jEeCn5oAD2BvLqg"/>
      <parameter id="_xDQOMG_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_xDQOMW_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_xDQOMm_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="AUTOCOMMIT"/>
      <code>update 	%x{md:physicalPath($CDC,'cdcTableName')}x%
set 	CDC_CONSUMMATION = '1'
where	(1=1)
%x{$CDC/tech:cdcFilterPart2($this)}x%</code>
    </actionCode>
    <actionCode id="_xDQOM2_jEeCn5oAD2BvLqg" generationCondition="" isBeginAction="false" name="Insertion in pre-integration data" nbCycles="-1" toleratedError="false" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_xDQONG_jEeCn5oAD2BvLqg" executionType="OK" generationType="OK" mandatory="1" targetId="_xDQOOG_jEeCn5oAD2BvLqg"/>
      <parameter id="_xDQONW_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_xDQONm_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_xDQON2_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="AUTOCOMMIT"/>
      <code>%xsl{
&lt;xsl:variable name=&quot;columns&quot; select=&quot;$REF/ref:columns()[(tech:isIns() or tech:isUpd()) and not(tech:onTrg())]&quot;/>

%xsl preserveSpace=&quot;true&quot;{insert into %x{md:physicalPath($REF,'workName')}x%
(
	%x{md:patternList($columns,'[name]', ',\n\t')}x%,
	INCREMENTAL_FLAG
)
select		%x{if (md:paramValue($this,'useDistinct')='true') then 'DISTINCT' else ''}x%
	%x{md:patternList($columns,'[expression] AS [name]', ',\n\t')}x%,
	%x{if ($REF/tech:hasCdc() and md:paramValue($this,'appendMode')='false') 
		then 'Case when CDC_CHANGE_TYPE=''U'' then ''I'' else CDC_CHANGE_TYPE end' 
		else 
			if ($REF/tech:hasCdc() and md:paramValue($this,'appendMode')='true') then 'CDC_CHANGE_TYPE' else '''I''' }x% INCREMENTAL_FLAG
from	%x{$REF/tech:fromPart()}x%
where	(1=1)%xsl{
%x{$REF/tech:joinPart()}x%
%x{$REF/tech:filterPart()}x%
%x{$REF/tech:cdcFilterPart2($this)}x%
%x{if ($REF/tech:hasCdc() and md:paramValue($this,'appendMode')='true') then '
And CDC_CHANGE_TYPE in (''I'',''D'')' else '' }x%	
%x{$REF/tech:groupByPart()}x%
%x{$REF/tech:havingPart()}x%}xsl%
}xsl%}xsl%</code>
    </actionCode>
    <actionCode id="_xDQOOG_jEeCn5oAD2BvLqg" generationCondition="'${recycleRejects}$'='true'" isBeginAction="false" name="Recycle of previous rejected data" nbCycles="-1" toleratedError="true" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_xDQOOW_jEeCn5oAD2BvLqg" generationCondition="'${transactionalModeOnTarget}$'='false'" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_xDQOPm_jEeCn5oAD2BvLqg"/>
      <link id="_xDQOOm_jEeCn5oAD2BvLqg" generationCondition="'${transactionalModeOnTarget}$'='true'" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_xDQOVW_jEeCn5oAD2BvLqg"/>
      <parameter id="_xDQOO2_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_xDQOPG_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_xDQOPW_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="AUTOCOMMIT"/>
      <code>%xsl{
&lt;xsl:variable name=&quot;columns&quot; select=&quot;$REF/ref:columns()[(tech:isIns() or tech:isUpd()) and not(tech:onTrg())]&quot;/>

%xsl preserveSpace=&quot;true&quot;{insert into %x{md:physicalPath($REF,'workName')}x%
(
	%x{md:patternList($columns,'[name]', ',\n\t')}x%,
	INCREMENTAL_FLAG
)
Select DISTINCT
	%x{md:patternList($columns,'[name]', ',\n\t')}x%, 
	'I' INCREMENTAL_FLAG
From %x{md:physicalPath($REF,'rejectName')}x% AS REJ
Where 	not exists (
		Select 'X' 
		from %x{md:physicalPath($REF,'workName')}x% AS INT
		Where %x{md:patternList($REF/ref:columns()[tech:isUk()],'REJ.[name]=INT.[name]', '\n\tand\t\t\t')}x%
		)
And REJ.REJECTED_BY		= '%x{$REF/tech:rejectedBy()}x%'
And REJ.REJECT_MODE		= '%x{$REF/tech:rejectMode()}x%'	
}xsl%
}xsl%</code>
    </actionCode>
    <actionCode id="_xDQOPm_jEeCn5oAD2BvLqg" generationCondition="'${synchronizeDeletionsFromCDC}$'='true'" isBeginAction="false" name="Deletion of target table from pre-integration table" nbCycles="-1" toleratedError="false" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_xDQOP2_jEeCn5oAD2BvLqg" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_xDQORG_jEeCn5oAD2BvLqg"/>
      <parameter id="_xDQOQG_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_xDQOQW_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_xDQOQm_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="AUTOCOMMIT"/>
      <parameter id="_xDQOQ2_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE_STAT" type="String" value="DELETE"/>
      <code>Delete from %x{md:physicalPath($REF/ref:target())}x%
Where exists (
		Select 'X'
		From 	%x{md:physicalPath($REF,'workName')}x% INT
		Where	%x{md:patternList($REF/ref:columns()[tech:isUk()],'{../ref:target()/tech:name()}.[name]=INT.[name]', '\n\tand\t\t\t')}x%
		And INCREMENTAL_FLAG='D'
	)</code>
    </actionCode>
    <actionCode id="_xDQORG_jEeCn5oAD2BvLqg" generationCondition="($REF/tech:hasIntegrationReject()) or $REF/ref:from()[tech:isCDC()]" isBeginAction="false" name="Removal of deleted rows in pre-integration table" nbCycles="-1" toleratedError="false" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_xDQORW_jEeCn5oAD2BvLqg" executionType="OK" generationType="OK" mandatory="1"/>
      <parameter id="_xDQORm_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_xDQOR2_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_xDQOSG_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="AUTOCOMMIT"/>
      <code>delete from %x{md:physicalPath($REF,'workName')}x%
where	INCREMENTAL_FLAG = 'D'</code>
    </actionCode>
    <actionCode id="_xDQOSW_jEeCn5oAD2BvLqg" generationCondition="'${deleteAllTargetTable}$'='true'" isBeginAction="false" name="T - Deletion of target table" nbCycles="-1" toleratedError="false" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_xDQOSm_jEeCn5oAD2BvLqg" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_xDQOLm_jEeCn5oAD2BvLqg"/>
      <parameter id="_xDQOS2_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_xDQOTG_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_xDQOTW_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="NOCOMMIT"/>
      <parameter id="_xDQOTm_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE_STAT" type="String" value="DELETE"/>
      <parameter id="_xDQOT2_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_NAME" ref="#_xDQOBm_jEeCn5oAD2BvLqg" type="String" value="T1"/>
      <code>delete from %x{md:physicalPath($REF/ref:target())}x%</code>
    </actionCode>
    <actionCode id="_xDQOUG_jEeCn5oAD2BvLqg" generationCondition="'${createTargetTable}$' = 'drop and create'" isBeginAction="false" name="Drop of target table " nbCycles="-1" toleratedError="true" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_xDQOUW_jEeCn5oAD2BvLqg" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_xDQOE2_jEeCn5oAD2BvLqg"/>
      <parameter id="_xDQOUm_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_xDQOU2_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_xDQOVG_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="AUTOCOMMIT"/>
      <parameter id="_tqzhIM0kEeig2LA7wtLdqA" name="SQL_MULTI_QUERYS" type="Boolean" value="true"/>
      <code>DATABASE %x{$REF/ref:target()/ref:schema()/tech:catalogName()}x%;&#xD;
Drop table %x{md:physicalPath($REF/ref:target())}x%;</code>
    </actionCode>
    <actionCode id="_xDQOVW_jEeCn5oAD2BvLqg" generationCondition="'${synchronizeDeletionsFromCDC}$'='true'" isBeginAction="false" name="T - Deletion of target table from pre-integration table" nbCycles="-1" toleratedError="false" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_xDQOVm_jEeCn5oAD2BvLqg" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_xDQORG_jEeCn5oAD2BvLqg"/>
      <parameter id="_xDQOV2_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_xDQOWG_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_xDQOWW_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="NOCOMMIT"/>
      <parameter id="_xDQOWm_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE_STAT" type="String" value="DELETE"/>
      <parameter id="_xDQOW2_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_NAME" ref="#_xDQOBm_jEeCn5oAD2BvLqg" type="String" value="T1"/>
      <code>Delete from %x{md:physicalPath($REF/ref:target())}x%
Where exists (
		Select 'X'
		From 	%x{md:physicalPath($REF,'workName')}x% INT
		Where	%x{md:patternList($REF/ref:columns()[tech:isUk()],'{../ref:target()/tech:name()}.[name]=INT.[name]', '\n\tand\t\t\t')}x%
		And INCREMENTAL_FLAG='D'
	)</code>
    </actionCode>
    <templateType>I-TP.RDBMS.PREPARING</templateType>
  </subProcess>
  <subProcess id="_xDQOXG_jEeCn5oAD2BvLqg" name="INTEGRATION">
    <parameter id="_xDQOXW_jEeCn5oAD2BvLqg" name="TPL_STEP" type="String" value="Integration.AfterControl"/>
    <actionCode id="_xDQOXm_jEeCn5oAD2BvLqg" generationCondition="'${doInsert}$'='true' or '${doUpdate}$'='true'" isBeginAction="false" name="Determination of what could be updated (UK)" nbCycles="-1" toleratedError="false" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_xDQOX2_jEeCn5oAD2BvLqg" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_xDQOY2_jEeCn5oAD2BvLqg"/>
      <parameter id="_xDQOYG_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_xDQOYW_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_xDQOYm_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="AUTOCOMMIT"/>
      <code>update	%x{md:physicalPath($REF,'workName')}x%
set	INCREMENTAL_FLAG = 'U'
where 	exists	(
		select	'X'
		from	%x{md:physicalPath($REF/ref:target())}x% %x{$REF/tech:tableAliasWord()}x% T
		where	%x{md:patternList($REF/ref:columns()[tech:isUk()],'T.[name] = {md:physicalPath(..,''workName'')}.[name]', '\n\t\t\tAnd\t\t\t\t\t')}x%
		)
</code>
    </actionCode>
    <actionCode id="_xDQOY2_jEeCn5oAD2BvLqg" generationCondition="'${doUpdate}$'='true'" isBeginAction="false" name="Determination of what shouldn't be updated" nbCycles="-1" toleratedError="false" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_xDQOZG_jEeCn5oAD2BvLqg" generationCondition="'${transactionalModeOnTarget}$'='true'" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_47NowG_jEeCn5oAD2BvLqg"/>
      <link id="_xDQOZW_jEeCn5oAD2BvLqg" generationCondition="'${transactionalModeOnTarget}$'='false'" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_B904zG_kEeCn5oAD2BvLqg"/>
      <parameter id="_xDQOZm_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_xDQOZ2_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_xDQOaG_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="AUTOCOMMIT"/>
      <code>update	%x{md:physicalPath($REF,'workName')}x%&#xD;
set	INCREMENTAL_FLAG = 'N'&#xD;
where 	exists	(&#xD;
		select	'X'&#xD;
		from	%x{md:physicalPath($REF/ref:target())}x% %x{$REF/tech:tableAliasWord()}x% T&#xD;
		where	&#xD;
				%x{md:patternList($REF/ref:columns()[tech:isUk()],'T.[name]\t={md:physicalPath(..,''workName'')}.[name]', '\n\t\t\tAnd\t')}x%&#xD;
		%x{md:patternList($REF/ref:columns()[not(tech:isUk()) and (tech:isUpdated() and not(tech:mappedOnTarget()))],'And\t(T.[name]\t={md:physicalPath(..,''workName'')}.[name] or (T.[name] is null and {md:physicalPath(..,''workName'')}.[name] is null))', '\n\t\t')}x%&#xD;
		)&#xD;
And	%x{md:physicalPath($REF,'workName')}x%.INCREMENTAL_FLAG='U'		&#xD;
</code>
    </actionCode>
    <actionCode id="_xDQOdG_jEeCn5oAD2BvLqg" generationCondition="'${doInsert}$'='true'" isBeginAction="false" name="T - Insertion of rows in target" nbCycles="-1" toleratedError="false" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_xDQOdW_jEeCn5oAD2BvLqg" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_xDQOe2_jEeCn5oAD2BvLqg"/>
      <parameter id="_xDQOdm_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_xDQOd2_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_xDQOeG_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_NAME" ref="#_xDQOBm_jEeCn5oAD2BvLqg" type="String" value="T1"/>
      <parameter id="_xDQOeW_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="NOCOMMIT"/>
      <parameter id="_xDQOem_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE_STAT" type="String" value="INSERT"/>
      <code>%xsl{
&lt;xsl:variable name=&quot;InsNotTrgColumns&quot; select=&quot;$REF/ref:columns()[(tech:isIns() and not(tech:onTrg()))]&quot;/>
&lt;xsl:variable name=&quot;InsTrgColumns&quot; select=&quot;$REF/ref:columns()[(tech:isIns() and tech:onTrg())]&quot;/>

%xsl preserveSpace=&quot;true&quot;{insert into 	%x{md:physicalPath($REF/ref:target())}x%
	(	%x{md:patternList($InsNotTrgColumns,'[name]', ',\n\t\t')}x%
		%x{md:patternList($InsTrgColumns,'[name]', ',\n\t\t',',','')}x%
	)
select	
		%x{md:patternList($InsNotTrgColumns,'[name]', ',\n\t\t')}x%
		%x{md:patternList($InsTrgColumns,'[expression]', ',\n\t\t',',','')}x%
from	%x{md:physicalPath($REF,'workName')}x%
where	INCREMENTAL_FLAG = 'I'
}xsl%}xsl%</code>
    </actionCode>
    <actionCode id="_xDQOe2_jEeCn5oAD2BvLqg" generationCondition="'${commitTransaction}$'='true'" isBeginAction="false" name="T - Commit of transaction in target" nbCycles="-1" toleratedError="false" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_xDQOfG_jEeCn5oAD2BvLqg" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_p5o98Mu2EeiPY-9-vFlpTA"/>
      <parameter id="_xDQOfW_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_xDQOfm_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_xDQOf2_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_NAME" ref="#_xDQOBm_jEeCn5oAD2BvLqg" type="String" value="T1"/>
      <parameter id="_xDQOgG_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="COMMIT"/>
      <code></code>
    </actionCode>
    <actionCode id="_xDQOgW_jEeCn5oAD2BvLqg" generationCondition="not(md:paramValue($this, 'unlockCdcTable')='false')" isBeginAction="false" name="Unlock of CDC table" nbCycles="-1" repetitionMode="Sequential" repetitionQuery="$REF/ref:from()[tech:isCDC() and not(tech:isLoaded())]" repetitionVariableName="CDC" toleratedError="false" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_xDQOgm_jEeCn5oAD2BvLqg" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_xDQOhm_jEeCn5oAD2BvLqg"/>
      <parameter id="_xDQOg2_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_xDQOhG_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_xDQOhW_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="AUTOCOMMIT"/>
      <code>Delete 	from 	%x{md:physicalPath($CDC,'cdcTableName')}x%
Where	CDC_CONSUMMATION = '1'
%x{$CDC/tech:cdcFilterPart2($this)}x%</code>
    </actionCode>
    <actionCode id="_xDQOhm_jEeCn5oAD2BvLqg" generationCondition="'${cleanTemporaryObjects }$'='true' and ('${appendMode}$'='false' or $REF/tech:hasIntegrationReject())" isBeginAction="false" name="Drop of pre-integration table" nbCycles="-1" toleratedError="true" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_xDQOh2_jEeCn5oAD2BvLqg" executionType="OK" generationType="OK_KO" mandatory="1"/>
      <parameter id="_xDQOiG_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_xDQOiW_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_xDQOim_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="AUTOCOMMIT"/>
      <parameter id="_q0cN8MvlEeiPY-9-vFlpTA" name="SQL_MULTI_QUERYS" type="Boolean" value="true"/>
      <code>DATABASE %x{$REF/ref:target()/ref:schema()/ref:work()/tech:catalogName()}x%;&#xD;
drop table %x{md:physicalPath($REF,'workName')}x%;&#xD;
DATABASE %x{$REF/ref:target()/ref:schema()/tech:catalogName()}x%;&#xD;
</code>
    </actionCode>
    <actionCode id="_xDQOlW_jEeCn5oAD2BvLqg" generationCondition="'${doInsert}$'='true'" isBeginAction="false" name="Insertion of rows in target" nbCycles="-1" toleratedError="false" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_xDQOlm_jEeCn5oAD2BvLqg" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_p5o98Mu2EeiPY-9-vFlpTA"/>
      <parameter id="_xDQOl2_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_xDQOmG_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_xDQOmW_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="AUTOCOMMIT"/>
      <parameter id="_xDQOmm_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE_STAT" type="String" value="INSERT"/>
      <code>%xsl{
&lt;xsl:variable name=&quot;InsNotTrgColumns&quot; select=&quot;$REF/ref:columns()[(tech:isIns() and not(tech:onTrg()))]&quot;/>
&lt;xsl:variable name=&quot;InsTrgColumns&quot; select=&quot;$REF/ref:columns()[(tech:isIns() and tech:onTrg())]&quot;/>

%xsl preserveSpace=&quot;true&quot;{insert into 	%x{md:physicalPath($REF/ref:target())}x%
	(	%x{md:patternList($InsNotTrgColumns,'[name]', ',\n\t\t')}x%
		%x{md:patternList($InsTrgColumns,'[name]', ',\n\t\t',',','')}x%
	)
select	
		%x{md:patternList($InsNotTrgColumns,'[name]', ',\n\t\t')}x%
		%x{md:patternList($InsTrgColumns,'[expression]', ',\n\t\t',',','')}x%
from	%x{md:physicalPath($REF,'workName')}x%
where	INCREMENTAL_FLAG = 'I'
}xsl%}xsl%</code>
    </actionCode>
    <actionCode id="_xDQOm2_jEeCn5oAD2BvLqg" isBeginAction="false" name="EmptyAction" nbCycles="-1" toleratedError="false" technology="com.indy.engine.actionCodes.EmptyActionCodeI">
      <link id="_xDQOnG_jEeCn5oAD2BvLqg" generationCondition="'${appendMode}$'='false'" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_xDQOrW_jEeCn5oAD2BvLqg"/>
      <link id="_xDQOnW_jEeCn5oAD2BvLqg" generationCondition="'${appendMode}$'='true' and ($REF/tech:hasIntegrationReject() or $REF/tech:hasCdc()) and '${transactionalModeOnTarget}$'='false' " executionType="OK" generationType="OK" mandatory="1" targetId="_xDQOlW_jEeCn5oAD2BvLqg"/>
      <link id="_xDQOnm_jEeCn5oAD2BvLqg" generationCondition="'${appendMode}$'='true' and ($REF/tech:hasIntegrationReject() or $REF/tech:hasCdc()) and '${transactionalModeOnTarget}$'='true' " executionType="OK" generationType="OK_KO" mandatory="1" targetId="_xDQOdG_jEeCn5oAD2BvLqg"/>
      <link id="_xDQOn2_jEeCn5oAD2BvLqg" generationCondition="'${appendMode}$'='true' and not($REF/tech:hasIntegrationReject()) and not($REF/tech:hasCdc()) and '${transactionalModeOnTarget}$'='true' " executionType="OK" generationType="OK" mandatory="1" targetId="_xDQOoW_jEeCn5oAD2BvLqg"/>
      <link id="_xDQOoG_jEeCn5oAD2BvLqg" generationCondition="'${appendMode}$'='true' and not($REF/tech:hasIntegrationReject()) and not($REF/tech:hasCdc()) and '${transactionalModeOnTarget}$'='false' " executionType="OK" generationType="OK" mandatory="1" targetId="_xDQOqG_jEeCn5oAD2BvLqg"/>
    </actionCode>
    <actionCode id="_xDQOoW_jEeCn5oAD2BvLqg" generationCondition="'${doInsert}$'='true'" isBeginAction="false" name="T - Insertion of new rows in target - append" nbCycles="-1" toleratedError="false" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_xDQOom_jEeCn5oAD2BvLqg" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_xDQOe2_jEeCn5oAD2BvLqg"/>
      <parameter id="_xDQOo2_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_xDQOpG_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_xDQOpW_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_NAME" ref="#_xDQOBm_jEeCn5oAD2BvLqg" type="String" value="T1"/>
      <parameter id="_xDQOpm_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="NO COMMIT"/>
      <parameter id="_xDQOp2_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE_STAT" type="String" value="INSERT"/>
      <code>insert into	%x{md:physicalPath($REF/ref:target())}x%
( 
	%x{md:patternList($REF/ref:columns()[tech:isIns()],'[name]', ',\n\t')}x%
) 
select	%x{if (md:paramValue($this,'useDistinct')='true') then 'DISTINCT' else ''}x%
		%x{md:patternList($REF/ref:columns()[tech:isIns()],'[mapping]', ',\n\t\t')}x%
from	%x{$REF/tech:fromPart()}x%
where	(1=1)%xsl{
%x{$REF/tech:joinPart()}x%
%x{$REF/tech:filterPart()}x%
%x{$REF/tech:cdcFilterPart2($this)}x%
%x{$REF/tech:groupByPart()}x%
%x{$REF/tech:havingPart()}x%}xsl%</code>
    </actionCode>
    <actionCode id="_xDQOqG_jEeCn5oAD2BvLqg" generationCondition="'${doInsert}$'='true'" isBeginAction="false" name="Insertion of new rows in target - append" nbCycles="-1" toleratedError="false" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_xDQOqW_jEeCn5oAD2BvLqg" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_p5o98Mu2EeiPY-9-vFlpTA"/>
      <parameter id="_xDQOqm_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_xDQOq2_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_xDQOrG_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="AUTOCOMMIT"/>
      <code>insert into	%x{md:physicalPath($REF/ref:target())}x%
( 
	%x{md:patternList($REF/ref:columns()[tech:isIns()],'[name]', ',\n\t')}x%
) 
select	%x{if (md:paramValue($this,'useDistinct')='true') then 'DISTINCT' else ''}x%
		%x{md:patternList($REF/ref:columns()[tech:isIns()],'[mapping]', ',\n\t\t')}x%
from	%x{$REF/tech:fromPart()}x%
where	(1=1)%xsl{
%x{$REF/tech:joinPart()}x%
%x{$REF/tech:filterPart()}x%
%x{$REF/tech:cdcFilterPart2($this)}x%
%x{$REF/tech:groupByPart()}x%
%x{$REF/tech:havingPart()}x%}xsl%</code>
    </actionCode>
    <actionCode id="_xDQOrW_jEeCn5oAD2BvLqg" generationCondition="(('${doInsert}$'='true' or '${doUpdate}$'='true') and '${createIndexOnPreIntegrationTable}$'='true')" isBeginAction="false" name="Creation of a unique index on pre-integration table" nbCycles="-1" toleratedError="false" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_lYQSEMvlEeiPY-9-vFlpTA" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_xDQOXm_jEeCn5oAD2BvLqg"/>
      <parameter id="_xDQOr2_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_xDQOsG_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_xDQOsW_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="AUTOCOMMIT"/>
      <parameter id="_lyRUkMvlEeiPY-9-vFlpTA" name="SQL_MULTI_QUERYS" type="Boolean" value="true"/>
      <code>DATABASE %x{$REF/ref:target()/ref:schema()/ref:work()/tech:catalogName()}x%;
%x{$REF/mdj:pattern('create unique index idx1_[workName]')}x%
on		%x{md:physicalPath($REF,'workName')}x% (%x{md:patternList($REF/ref:columns()[tech:isUk()],'[name]', ', ')}x%);
DATABASE %x{$REF/ref:target()/ref:schema()/tech:catalogName()}x%;</code>
    </actionCode>
    <actionCode id="_47NowG_jEeCn5oAD2BvLqg" generationCondition="'${doUpdate}$'='true' and exists($REF/ref:columns()[not(tech:isUk()) and tech:isUpdated()])" isBeginAction="false" name="T - Update rows in target table" nbCycles="-1" toleratedError="false" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_xDQObm_jEeCn5oAD2BvLqg" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_xDQOdG_jEeCn5oAD2BvLqg"/>
      <parameter id="_47Nowm_jEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_47Now2_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_47NoxG_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_NAME" ref="#_xDQOBm_jEeCn5oAD2BvLqg" type="String" value="T1"/>
      <parameter id="_47NoxW_jEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="NOCOMMIT"/>
      <parameter id="_47Noxm_jEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE_STAT" type="String" value="UPDATE"/>
      <code>%xsl{
&lt;xsl:variable name=&quot;pName&quot; select=&quot;md:physicalPath($REF/ref:target())&quot;/>
&lt;xsl:variable name=&quot;tableName&quot; select=&quot;$REF/ref:target()/tech:physicalPath()&quot;/>

%xsl preserveSpace=&quot;true&quot;{update  %x{$pName}x%  
set    
&lt;xsl:if test=&quot;$updNotTrgColumns&quot;>
       %x{if (count($updNotTrgColumns)>1) then '(' else ''}%
             %x{md:patternList($updNotTrgColumns,'[name]', ',\n\t\t')}x%
       %x{if (count($updNotTrgColumns)>1) then ')' else ''}% = 

       ((     select %x{md:patternList($updNotTrgColumns,'S.[name]', ',\n\t\t\t')}x%
             from   %x{md:physicalPath($REF,'workName')}x% S
             where  %x variables=&quot;tableName&quot;{md:patternList($ukColumns,'S.[name]={$tableName}.[name]', '\n\t\t\t And ')}x%
             AND          S.INCREMENTAL_FLAG = 'U'
       ))
       %x variables=&quot;tableName&quot;{md:patternList($updTrgColumns,'[name]=[expression]', ',\n\t\t',if ($updNotTrgColumns) then ',' else '')}x% 
where exists (
              select 'X'
              from      %x{md:physicalPath($REF,'workName')}x% S
              where     %x variables=&quot;tableName&quot;{md:patternList($ukColumns,'S.[name]={$tableName}.[name]', '\n\t\t\t And ')}x%
              AND S.INCREMENTAL_FLAG = 'U')
&lt;/xsl:if>

}xsl%}xsl% 
</code>
    </actionCode>
    <actionCode id="_B904zG_kEeCn5oAD2BvLqg" generationCondition="'${doUpdate}$'='true' and exists($REF/ref:columns()[not(tech:isUk()) and tech:isUpdated()])" isBeginAction="false" name="Update rows in target table" nbCycles="-1" toleratedError="false" technology="com.indy.engine.actionCodes.JdbcActionCodeI">
      <link id="_xDQOjG_jEeCn5oAD2BvLqg" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_xDQOlW_jEeCn5oAD2BvLqg"/>
      <parameter id="_B904zm_kEeCn5oAD2BvLqg" name="SQL_CONNECTION" type="String" value="%targetConnection{$REF}%"/>
      <parameter id="_B904z2_kEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE" type="String" value="DDL_DML"/>
      <parameter id="_B9040G_kEeCn5oAD2BvLqg" name="SQL_TRANSACTION_TYPE" type="String" value="AUTOCOMMIT"/>
      <parameter id="_B9040W_kEeCn5oAD2BvLqg" name="SQL_ACTION_TYPE_STAT" type="String" value="INSERT"/>
      <code>%xsl{
&lt;xsl:variable name=&quot;pName&quot; select=&quot;md:physicalPath($REF/ref:target())&quot;/>
&lt;xsl:variable name=&quot;tableName&quot; select=&quot;$REF/ref:target()/tech:physicalPath()&quot;/>

%xsl preserveSpace=&quot;true&quot;{update  %x{$pName}x%  
set    
&lt;xsl:if test=&quot;$updNotTrgColumns&quot;>
       %x{if (count($updNotTrgColumns)>1) then '(' else ''}%
             %x{md:patternList($updNotTrgColumns,'[name]', ',\n\t\t')}x%
       %x{if (count($updNotTrgColumns)>1) then ')' else ''}% = 

       ((     select %x{md:patternList($updNotTrgColumns,'S.[name]', ',\n\t\t\t')}x%
             from   %x{md:physicalPath($REF,'workName')}x% S
             where  %x variables=&quot;tableName&quot;{md:patternList($ukColumns,'S.[name]={$tableName}.[name]', '\n\t\t\t And ')}x%
             AND          S.INCREMENTAL_FLAG = 'U'
       ))
       %x variables=&quot;tableName&quot;{md:patternList($updTrgColumns,'[name]=[expression]', ',\n\t\t',if ($updNotTrgColumns) then ',' else '')}x% 
where exists (
              select 'X'
              from      %x{md:physicalPath($REF,'workName')}x% S
              where     %x variables=&quot;tableName&quot;{md:patternList($ukColumns,'S.[name]={$tableName}.[name]', '\n\t\t\t And ')}x%
              AND S.INCREMENTAL_FLAG = 'U')
&lt;/xsl:if>

}xsl%}xsl% 
</code>
    </actionCode>
    <actionCode id="_p5o98Mu2EeiPY-9-vFlpTA" isBeginAction="false" name="clean" nbCycles="-1" toleratedError="false" technology="com.indy.engine.actionCodes.EmptyActionCodeI">
      <link id="_rQKE8Mu2EeiPY-9-vFlpTA" executionType="OK" generationType="OK_KO" mandatory="1" targetId="_xDQOgW_jEeCn5oAD2BvLqg"/>
    </actionCode>
    <templateType>I-TP.RDBMS.INTEGRATING</templateType>
    <xslVariable id="_fSXUaG_lEeCn5oAD2BvLqg" code="$REF/ref:columns()[(tech:isUpd() and not(tech:isUk()) and not(tech:onTrg()))]" name="updNotTrgColumns" type="xpath"/>
    <xslVariable id="_fSXUaW_lEeCn5oAD2BvLqg" code="$REF/ref:columns()[(tech:isUpd() and not(tech:isUk()) and tech:onTrg())]" name="updTrgColumns" type="xpath"/>
    <xslVariable id="_klGZVW_lEeCn5oAD2BvLqg" code="$REF/ref:columns()[tech:isUk()]" name="ukColumns" type="xpath"/>
  </subProcess>
  <templateType>I-TP.RDBMS</templateType>
</proc:process>